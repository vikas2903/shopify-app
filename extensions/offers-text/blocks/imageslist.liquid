<!-- Dependencies -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css">
<script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

<!-- Styles -->
<style>
  .subcollection-section {
    margin-top: {{ block.settings.section_margin_y }}px;
    margin-bottom: {{ block.settings.section_margin_y }}px;
  }

  .logo-container {
    display: flex;
    flex-wrap: nowrap;
    overflow-x: auto;
    gap: 1rem;
    padding: 1rem 0;
    scrollbar-width: none;
  justify-content: center;
  }

  .logo-container::-webkit-scrollbar {
    display: none;
  }

  .logo-item {
    text-align: center;
    flex: 0 0 auto;
    width: var(--image-size);
  }

  .logo-item a {
    display: block;
    text-decoration: none;
  }

  .logo-item img {
    width: var(--image-height);
    height: var(--image-height);
    border-radius: {{ block.settings.border_radius }}%;
    border: {{ block.settings.border_size }}px solid {{ block.settings.border_color }};
    object-fit: cover;
    object-position: center;
    display: block;
    margin: 0 auto;
  }

  .logo-item span {
    display: block;
    margin-top: 0.5rem;
    font-size: {{ block.settings.font_size }}rem;
    color: #000;
  }

  @media (max-width: 767px) {
    .logo-item span {
      font-size: 0.6rem;
    }
    .logo-container {
      gap: 0.75rem;
      padding: 0.75rem 0;
      justify-content: start;
    }
  }
</style>

<!-- Subcollection Section -->
<div class="subcollection-section">
  <div class="logo-container">
    {% for i in (1..8) %}
      {% assign image_setting = 'image' | append: i %}
      {% assign url_setting = 'url' | append: i %}
      {% assign collection_handle = block.settings[url_setting] | split: '/' | last %}
      {% assign collection = collections[collection_handle] %}

      {% if block.settings[image_setting] != blank or collection != nil %}

      {% if block.settings[image_setting]!= blank %}

        <div class="logo-item">
          <a href="{{ block.settings[url_setting] }}">
            <img 
              src="{{ block.settings[image_setting] | default: collection.image | img_url: '525x' }}" 
              alt="{{ block.settings[image_setting].alt | default: collection.title | escape }}">
            <span>{{ block.settings[image_setting].alt | default: collection.title }}</span>
          </a>
        </div>

        {% endif %}

        
      {% endif %}
    {% endfor %}
  </div>
</div>

<!-- CSS Variables -->
<style>
  :root {
    --image-height: {{ block.settings.image_height }}px;
  }
</style>
{% schema %}
{
  "name": "Subcollections List",
  "target": "section",
  "settings": [
    {
      "type": "range",
      "id": "border_size",
      "label": "Border size (px)",
      "min": 0,
      "max": 5,
      "step": 1,
      "default": 2
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border Color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "image_height",
      "label": "Image Height (px)",
      "min": 60,
      "max": 300,
      "step": 5,
      "default": 85
    },
    {
      "type": "range",
      "id": "border_radius",
      "label": "Border Radius (%)",
      "min": 0,
      "max": 100,
      "default": 50
    },
    {
      "type": "range",
      "id": "font_size",
      "label": "Font Size (rem)",
      "min": 0.5,
      "max": 3,
      "step": 0.1,
      "default": 1.2
    },
    {
      "type": "range",
      "id": "section_margin_y",
      "label": "Top & Bottom Margin (px)",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 20
    },
    {
      "type": "header",
      "content": "Subcategory List "
    },
    {
      "type": "image_picker",
      "id": "image1",
      "label": "Image 1 (optional)"
    },
    {
      "type": "url",
      "id": "url1",
      "label": "Collection URL 1"
    },
    {
      "type": "image_picker",
      "id": "image2",
      "label": "Image 2 (optional)"
    },
    {
      "type": "url",
      "id": "url2",
      "label": "Collection URL 2"
    },
    {
      "type": "image_picker",
      "id": "image3",
      "label": "Image 3 (optional)"
    },
    {
      "type": "url",
      "id": "url3",
      "label": "Collection URL 3"
    },
    {
      "type": "image_picker",
      "id": "image4",
      "label": "Image 4 (optional)"
    },
    {
      "type": "url",
      "id": "url4",
      "label": "Collection URL 4"
    },
    {
      "type": "image_picker",
      "id": "image5",
      "label": "Image 5 (optional)"
    },
    {
      "type": "url",
      "id": "url5",
      "label": "Collection URL 5"
    },
    {
      "type": "image_picker",
      "id": "image6",
      "label": "Image 6 (optional)"
    },
    {
      "type": "url",
      "id": "url6",
      "label": "Collection URL 6"
    },
    {
      "type": "image_picker",
      "id": "image7",
      "label": "Image 7 (optional)"
    },
    {
      "type": "url",
      "id": "url7",
      "label": "Collection URL 7"
    },
    {
      "type": "image_picker",
      "id": "image8",
      "label": "Image 8 (optional)"
    },
    {
      "type": "url",
      "id": "url8",
      "label": "Collection URL 8"
    }
  ]
}
{% endschema %}
